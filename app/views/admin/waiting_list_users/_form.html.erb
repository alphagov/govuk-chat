<%= form_with url:, method: do |f| %>
  <%= render "govuk_publishing_components/components/input", {
    label: {
      text: "Email address",
    },
    name: "waiting_list_user_form[email]",
    id: "waiting_list_user_form_email",
    value: form.email,
    error_items: error_items(form, :email),
  } %>

  <%= render "govuk_publishing_components/components/select", {
    id: "waiting_list_user_form_user_description",
    name: "waiting_list_user_form[user_description]",
    label: "User research description",
    full_width: true,
    error_id: form.errors.key?(:user_description) ? "waiting_list_user_form_user_description" : nil,
    options: ([""] + WaitingListUser.user_descriptions.keys).map do |description|
      {
        text: description.humanize,
        value: description,
        selected: form.user_description == description,
      }
    end,
  } %>

  <%= render "govuk_publishing_components/components/select", {
    id: "waiting_list_user_form_reason_for_visit",
    name: "waiting_list_user_form[reason_for_visit]",
    label: "User research reason for visit",
    full_width: true,
    error_id: form.errors.key?(:reason_for_visit) ? "waiting_list_user_form_reason_for_visit" : nil,
    options: ([""] + WaitingListUser.reason_for_visits.keys).map do |description|
      {
        text: description.humanize,
        value: description,
        selected: form.reason_for_visit == description,
      }
    end,
  } %>

  <%= render "govuk_publishing_components/components/button", {
    text: "Submit",
  } %>
<% end %>
