<%= content_for :title, "Questions" %>

<%= render "govuk_publishing_components/components/table", {
  head: [
    {
      text: "Question"
    },
    {
      text: "Answer status",
    },
    {
      text: "Actions",
    }
  ],
  rows: @questions.map do |question|
    answer = question.answer
    [
      {
        text: question.message.truncate(100)
      },
      {
        text: format_answer_status_as_tag(question.answer&.status)
      },
      {
        text: link_to("View question", "#", class: "govuk-link") +
          tag.br +
          link_to("View conversation", "#", class: "govuk-link")
      }
    ]
  end
} %>

<%
  pages = { }

  pages[:previous_page] = {
  url: admin_questions_path(page: @questions.prev_page),
  label: "#{@questions.current_page - 1} of #{@questions.total_pages}",
  title: "Previous page" } if @questions.prev_page

  pages[:next_page] = {
  url: admin_questions_path(page: @questions.next_page),
  label: "#{@questions.current_page + 1} of #{@questions.total_pages}",
  title: "Next page" } if @questions.next_page
%>

<%= render "govuk_publishing_components/components/previous_and_next_navigation", pages %>
